<!DOCTYPE html>
<html>
  <head>
    <title>Cesium Control Pad</title>
    <meta charset="UTF-8">
    <style>
    .connect-status{background-color:#ddd; padding:10px; text-align: center; border:1px solid #ccc;}
    .connect-status.connected{color:#fff; background-color:green;}
    .connect-status.error{color:#fff; background-color:red;}
    .operations{margin:20px;}
    </style>
  </head>
  <body>
  <div class="connect-status" id="connectStatus">
    Connecting...
  </div>
  <div class="operations" id="operations">
    <button data-type="createPolyline" disabled>Create Polyline</button>
    <button data-type="addLabel" disabled>Add Label</button>
    <button data-type="createEllipse" disabled>Create Ellipse</button>
    <hr>
    <button data-type="flyTo" disabled>Fly To</button>
    <button data-type="flyToExtent" disabled>Fly To Extent</button>
    <hr>
    <button data-type="clearScene">Clear Scene</button>
    <hr>
    <button data-type="showInfo" disabled>Show Info</button>
  </div>
  <script src="assets/scripts/jquery-2.1.0.min.js"></script>
  <script src="SocketServer/WebSocket.js"></script>
  <script>
  WebSocketHelper.connect('ws://localhost:8000').on('open', function(e){
    $('#connectStatus').html('Connected').addClass('connected').removeClass('error');
    $('#operations button').removeAttr('disabled');
  }).on('close', function(e){
    $('#connectStatus').html('Connection closed').removeClass('connected');
    $('#operations button').attr('disabled', 'disabled');
  }).on('error', function(e){
    $('#connectStatus').html('Connection error').addClass('error');
    $('#operations button').attr('disabled', 'disabled');
  });
  $('#operations button').on('click', function(){
    switch($(this).attr('data-type')){
      case 'createPolyline':
      WebSocketHelper.sendMessage('{"name":"createPolyline","args":{"id":"http://sdfsdsdfdsf","positions":[{"longitude":-100.0,"latitude":36.0,"height":0},{"longitude":-92.0,"latitude":35.0,"height":0}, {"longitude":-85.0,"latitude":26.0,"height":0}],"color":"blue","width":5.0,"outlineColor":"#ffccee","arrow":"tail"}}');
      break;
      //TODO add other apis
      case 'flyTo':
      WebSocketHelper.sendMessage('{"name":"flyTo","args":{"position":{"longitude":117.76,"latitude":32.71,"height":1500},"duration":10000}}');
      break;
      case 'flyToExtent':
      WebSocketHelper.sendMessage('{"name":"flyToExtent","args":{"extent":{"west":-90.0,"east":-87.0,"south":38,"north":40},"duration":4000}}');
      break;
      case 'addLabel':
      WebSocketHelper.sendMessage('{"name":"addLabel","args":{"id":"someLabelID","position":{"longitude":-100.0,"latitude":36.0,"height":0},"text":"Hello Cesium API", "font":{"height":16, "name":"Helvetica"}, "fillColor":"#fff","outlineColor":"#000","outlineWidth":2.0,"scale":1.0}}');
      break;
      case 'showInfo':
      WebSocketHelper.sendMessage('{"name":"showInfo","args":{"url": "http://www.baidu.com"}}');
      break;
      case 'clearScene':
      WebSocketHelper.sendMessage('{"name":"clearScene","args":{}}');
      break;
      case 'createEllipse':
      WebSocketHelper.sendMessage('{"name":"createEllipse","args":{"center":{"longitude":90.0, "latitude":40.0},"semiMajorAxis":210000,"semiMinorAxis":100100,"height":10000,"extrudedHeight":200000,"color":"#ff0f0f"}}');
      break;
    }
  });
  </script>
  </body>
</html>